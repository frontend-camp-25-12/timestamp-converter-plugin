# 时间戳转换器插件

一个功能强大的时间戳转换工具，支持多时区转换、相对时间显示和智能输入识别。

## 🌟 主要功能

### 时间戳转换
- 支持秒和毫秒时间戳
- 智能输入验证
- 实时格式化预览

### 多时区支持 (v1.1 新增)
- **动态时区列表**: 使用 `Intl.supportedValuesOf()` API 获取所有可用时区
- **实时偏移计算**: 自动计算当前时区偏移，包含夏令时
- **智能分组**: 常用时区优先显示，其他时区按地区分组
- **自动检测**: 自动检测并选择用户当前时区
- **降级支持**: 在不支持新API的环境中自动回退到基础时区列表

### 增强的显示功能
- **相对时间**: 显示"3小时前"、"明天"等相对时间描述
- **时区信息**: 显示详细的时区偏移信息
- **多种格式**: 标准格式、ISO格式、仅日期、仅时间等

### 智能交互
- **命令匹配**: 支持正则表达式匹配时间戳输入
- **快捷键支持**: 可设置全局快捷键快速启动
- **自动填充**: 输入时间戳时自动触发转换

## 🔧 技术改进

### 时区数据处理
```javascript
// 之前：硬编码时区列表
const timezones = [
  { label: '北京时间 (UTC+8)', value: 'Asia/Shanghai' }
];

// 现在：动态获取并智能处理
const allTimezones = Intl.supportedValuesOf('timeZone');
const option = this._createTimezoneOption(timezone, new Date());
```

### API 兼容性检查
```javascript
const support = {
  supportedValuesOf: typeof Intl.supportedValuesOf === 'function',
  dateTimeFormat: typeof Intl.DateTimeFormat === 'function',
  relativeTimeFormat: typeof Intl.RelativeTimeFormat === 'function'
};
```

### 增强的格式化输出
```javascript
return {
  standard: '2024/01/01 12:00:00',
  iso: '2024-01-01T04:00:00.000Z',
  relative: '3小时前',
  timezoneOffset: '+08:00',
  timezoneShort: 'CST'
};
```

## 🌍 支持的时区

### 常用时区（优先显示）
- UTC 协调世界时
- 亚洲：北京、东京、首尔、新加坡、新德里
- 美洲：纽约、洛杉矶、芝加哥、圣保罗  
- 欧洲：伦敦、巴黎、柏林
- 大洋洲：悉尼
- 非洲：开罗

### 完整时区支持
- 支持所有 IANA 时区数据库中的时区
- 自动处理夏令时转换
- 实时计算时区偏移

## 🚀 性能优化

- **延迟加载**: 时区列表按需生成
- **缓存机制**: 格式化结果智能缓存
- **错误处理**: 优雅降级到备用方案
- **内存优化**: 避免重复创建格式化器对象

## 📱 浏览器兼容性

| 功能 | Chrome | Firefox | Safari | Edge |
|------|--------|---------|--------|------|
| 基础时区 | ✅ | ✅ | ✅ | ✅ |
| 动态时区列表 | ✅ (102+) | ✅ (93+) | ✅ (15.4+) | ✅ (102+) |
| 相对时间 | ✅ | ✅ | ✅ | ✅ |

## 🔍 使用示例

### 基础转换
```javascript
// 输入时间戳: 1704067200
// 选择时区: Asia/Shanghai
// 输出:
// 标准格式: 2024/01/01 12:00:00
// 相对时间: 6个月前
// 时区信息: +08:00
```

### 快捷命令
- 输入 "timestamp" 或 "时间戳" 打开插件
- 输入数字(10-13位) 自动识别为时间戳
- 输入 "now" 或 "现在" 获取当前时间戳

## 🛠️ 开发说明

### 核心API
- `getTimezones()`: 获取动态时区列表
- `formatTimestamp()`: 增强的时间格式化
- `checkTimezoneSupport()`: 检查浏览器兼容性
- `getUserTimezone()`: 获取用户当前时区

### 测试文件
运行 `timezone-test.html` 可以测试时区功能是否正常工作。p-converter-plugin）

## 插件简介
本插件基于 Electron 插件平台开发，旨在实现一个高效、易用的时间戳与日期时间转换工具。插件支持多时区、秒/毫秒级时间戳自动识别，满足常见开发与测试场景。

## 功能特性
- ✅ 支持时间戳（秒/毫秒）与日期时间的双向转换
- ✅ 支持10个常用时区选择，满足全球化开发需求
- ✅ 智能验证时间戳有效性，提供友好的错误提示
- ✅ 一键获取当前时间戳，支持多种格式输出
- ✅ 现代化UI设计，支持渐变背景和毛玻璃效果
- ✅ 模块化架构，HTML/CSS/JS分离，易于维护和扩展
- ✅ 使用CommonJS和ES6+语法，符合现代前端开发规范

## 使用说明
1. 在主应用插件管理界面，输入插件文件夹路径 `./timestamp-converter-plugin` 并点击添加。
2. 在插件列表中打开“时间戳转换器”，即可使用全部功能。
3. 支持输入时间戳或日期时间，选择时区后即可完成转换。

## 目录结构
- `plugin.json` —— 插件元数据，定义插件基本信息及窗口配置
- `index.html` —— 插件主界面，定义DOM结构和布局
- `style.css` —— 插件样式表，采用现代渐变设计和响应式布局
- `main.js` —— 插件核心逻辑，实现TimestampConverter类和全部业务功能
- `preload.js` —— 预加载脚本，暴露timestampAPI供渲染进程使用
- `README.md` —— 项目文档及开发约定（本文件）

## 开发约定与扩展建议
- 采用模块化开发，HTML/CSS/JS分离，便于维护和团队协作
- JavaScript使用ES6+类语法，遵循面向对象编程范式
- 预加载脚本使用CommonJS规范，暴露统一API供渲染进程调用
- CSS采用现代设计语言，支持渐变背景和毛玻璃效果
- 推荐所有新插件均采用类似架构，保持代码风格一致性
- 如需扩展功能，可在`timestampAPI`中添加新方法，或扩展`TimestampConverter`类

## 适用范围
- 适用于本 Electron 插件平台，推荐团队成员在开发、测试、数据处理等场景下使用

---
如有问题或建议，欢迎在团队飞书群内讨论。
